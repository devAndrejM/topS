<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      {{ 'TABS.SETTINGS' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ 'TABS.SETTINGS' | translate }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <form [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
    <!-- User Info Card -->
    <ion-card *ngIf="currentUser">
      <ion-card-header>
        <ion-card-title>Vaši podaci</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label>
            <h3>Korisnički ID</h3>
            <p>{{ currentUser.userId }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Trenutna zemlja</h3>
            <p>{{ currentUser.countryName }}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Settings Form -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ 'SETTINGS.TITLE' | translate }}</ion-card-title>
        <ion-card-subtitle>Prilagodite pretraživanje prema vašim potrebama</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <!-- Country Selection -->
        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.COUNTRY' | translate }}</ion-label>
          <ion-select 
            formControlName="countryId" 
            placeholder="Odaberite zemlju"
            interface="popover">
            <ion-select-option 
              *ngFor="let country of countries" 
              [value]="country.id">
              {{ country.name }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Clothing Size -->
        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.CLOTHING_SIZE' | translate }}</ion-label>
          <ion-select 
            formControlName="clothingSize" 
            placeholder="Odaberite veličinu"
            interface="popover">
            <ion-select-option 
              *ngFor="let size of clothingSizes" 
              [value]="size">
              {{ size }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Shoe Size System -->
        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.SHOE_SIZE_SYSTEM' | translate }}</ion-label>
          <ion-select 
            formControlName="shoeSizeSystem" 
            placeholder="Odaberite sustav"
            interface="popover"
            (ionChange)="onShoeSizeSystemChange()">
            <ion-select-option 
              *ngFor="let system of shoeSizeSystems" 
              [value]="system">
              {{ system }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Shoe Size -->
        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.SHOE_SIZE' | translate }}</ion-label>
          <ion-select 
            formControlName="shoeSize" 
            placeholder="Odaberite veličinu"
            interface="popover">
            <ion-select-option 
              *ngFor="let size of availableShoeSizes" 
              [value]="size">
              {{ size }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Save Button -->
        <ion-button 
          expand="block" 
          type="submit" 
          [disabled]="!settingsForm.valid"
          class="save-button">
          <ion-icon name="save-outline" slot="start"></ion-icon>
          {{ 'SETTINGS.SAVE' | translate }}
        </ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Help Card -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Pomoć</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-icon name="information-circle-outline" slot="start" color="primary"></ion-icon>
          <ion-label class="ion-text-wrap">
            <h3>Zašto su mi potrebne ove postavke?</h3>
            <p>Vaša zemlja određuje koje trgovine će biti pretražene. Veličine pomažu filtrirati rezultate koji su vam dostupni.</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="shield-checkmark-outline" slot="start" color="success"></ion-icon>
          <ion-label class="ion-text-wrap">
            <h3>Privatnost</h3>
            <p>Vaši podaci se čuvaju lokalno na vašem uređaju i koriste se samo za poboljšanje pretraživanja.</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>
