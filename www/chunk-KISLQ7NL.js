import{L as u,M as h,a as c,b as n,c as a}from"./chunk-GZM6PKPG.js";var p={production:!0,apiUrl:"https://your-api-domain.railway.app"};var l=(()=>{let r=class r{constructor(t){this.http=t,this.baseUrl=p.apiUrl}search(t,e="anonymous",s=""){let o=new u().set("query",t).set("userId",e);return s&&(o=o.set("category",s)),this.http.get("${this.baseUrl}/api/search",{params:o})}getCategories(t,e="anonymous"){let s=new u().set("query",t).set("userId",e);return this.http.get("${this.baseUrl}/api/search/categories",{params:s})}getUserSettings(t){return this.http.get("${this.baseUrl}/api/user//settings")}updateUserSettings(t,e){return this.http.post("${this.baseUrl}/api/user//settings",e)}getCountries(){return this.http.get("${this.baseUrl}/api/user/countries")}};r.\u0275fac=function(e){return new(e||r)(a(h))},r.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var I=(()=>{let r=class r{constructor(t){this.apiService=t,this.currentUserSubject=new c(null),this.currentUser$=this.currentUserSubject.asObservable(),this.userIdKey="clothingsearch_user_id",this.initializeUser()}initializeUser(){let t=localStorage.getItem(this.userIdKey);t||(t=this.generateUserId(),localStorage.setItem(this.userIdKey,t)),this.loadUserSettings(t).subscribe({next:e=>this.currentUserSubject.next(e),error:()=>this.createDefaultSettings(t)})}generateUserId(){return"user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}getCurrentUserId(){return localStorage.getItem(this.userIdKey)||"anonymous"}getCurrentUser(){return this.currentUserSubject.value}loadUserSettings(t){return this.apiService.getUserSettings(t)}createDefaultSettings(t){let e={countryId:1,clothingSize:"M",shoeSize:"42",shoeSizeSystem:"EU"};this.apiService.updateUserSettings(t,e).subscribe({next:s=>this.currentUserSubject.next(s),error:s=>console.error("Failed to create default settings:",s)})}updateSettings(t){let e=this.getCurrentUserId();return this.apiService.updateUserSettings(e,t)}refreshUserSettings(){let t=this.getCurrentUserId();this.loadUserSettings(t).subscribe({next:e=>this.currentUserSubject.next(e),error:e=>console.error("Failed to refresh user settings:",e)})}};r.\u0275fac=function(e){return new(e||r)(a(l))},r.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();export{l as a,I as b};
