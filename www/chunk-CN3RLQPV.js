import{a as oe,b as re}from"./chunk-KISLQ7NL.js";import{A as S,Ba as G,Ea as B,F as d,Fa as V,G as u,Ga as D,H as x,Ha as A,I as z,Ia as L,J as O,Ja as H,Ma as $,Oa as q,Pa as X,Qa as Z,Ra as K,Ua as R,Va as Y,Za as J,_a as Q,ab as W,bb as ee,cb as te,fb as ie,gb as ne,m as n,ma as f,n as h,na as P,o as y,oa as j,p as g,qa as N,r as s,ra as F,s as e,sa as M,t,ta as w,u as _,ua as k,va as U,w as b,x as C,y as i,z as p}from"./chunk-GZM6PKPG.js";import"./chunk-U7EZXO5C.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AIVSP72F.js";import"./chunk-ZXAJZD2J.js";import"./chunk-ZPF3UMI3.js";import"./chunk-HGGI7JS7.js";import"./chunk-YBMMNUCE.js";import"./chunk-42QLUVHM.js";import"./chunk-7FY2OE2O.js";import"./chunk-6LWJNHS4.js";import"./chunk-PTNI3WES.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-J7JZC7PI.js";import"./chunk-CKP3SGE2.js";import"./chunk-S2CNIDDQ.js";import"./chunk-GD6VFYTL.js";import"./chunk-YDARD4JA.js";import"./chunk-C5MO2JOW.js";import"./chunk-DKVMNLG7.js";import"./chunk-R5HL6L5F.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as I}from"./chunk-JHI3MBHO.js";function le(o,a){if(o&1&&(e(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),i(3,"Va\u0161i podaci"),t()(),e(4,"ion-card-content")(5,"ion-item")(6,"ion-label")(7,"h3"),i(8,"Korisni\u010Dki ID"),t(),e(9,"p"),i(10),t()()(),e(11,"ion-item")(12,"ion-label")(13,"h3"),i(14,"Trenutna zemlja"),t(),e(15,"p"),i(16),t()()()()()),o&2){let l=C();n(10),p(l.currentUser.userId),n(6),p(l.currentUser.countryName)}}function se(o,a){if(o&1&&(e(0,"ion-select-option",17),i(1),t()),o&2){let l=a.$implicit;s("value",l.id),n(),S(" ",l.name," ")}}function me(o,a){if(o&1&&(e(0,"ion-select-option",17),i(1),t()),o&2){let l=a.$implicit;s("value",l),n(),S(" ",l," ")}}function ce(o,a){if(o&1&&(e(0,"ion-select-option",17),i(1),t()),o&2){let l=a.$implicit;s("value",l),n(),S(" ",l," ")}}function pe(o,a){if(o&1&&(e(0,"ion-select-option",17),i(1),t()),o&2){let l=a.$implicit;s("value",l),n(),S(" ",l," ")}}var Te=(()=>{let a=class a{constructor(r,c,m,E,ae){this.formBuilder=r,this.userService=c,this.apiService=m,this.toastController=E,this.loadingController=ae,this.countries=[],this.clothingSizes=["XS","S","M","L","XL","XXL"],this.shoeSizeSystems=["EU","US","UK"],this.euShoeSizes=Array.from({length:21},(T,v)=>(35+v).toString()),this.usShoeSizes=Array.from({length:14},(T,v)=>(6+v).toString()),this.ukShoeSizes=Array.from({length:13},(T,v)=>(5.5+v*.5).toString()),this.currentUser=null,this.settingsForm=this.formBuilder.group({countryId:["",f.required],clothingSize:["M",f.required],shoeSize:["42",f.required],shoeSizeSystem:["EU",f.required]})}ngOnInit(){this.loadCountries(),this.loadUserSettings()}loadCountries(){return I(this,null,function*(){try{this.countries=(yield this.apiService.getCountries().toPromise())||[]}catch(r){console.error("Error loading countries:",r),this.showToast("Gre\u0161ka pri dohva\u0107anju zemalja","danger")}})}loadUserSettings(){this.userService.currentUser$.subscribe(r=>{this.currentUser=r,r&&this.settingsForm.patchValue({countryId:r.countryId,clothingSize:r.clothingSize,shoeSize:r.shoeSize,shoeSizeSystem:r.shoeSizeSystem})})}get availableShoeSizes(){switch(this.settingsForm.get("shoeSizeSystem")?.value){case"US":return this.usShoeSizes;case"UK":return this.ukShoeSizes;default:return this.euShoeSizes}}onShoeSizeSystemChange(){this.settingsForm.patchValue({shoeSize:this.availableShoeSizes[5]})}saveSettings(){return I(this,null,function*(){if(this.settingsForm.valid){let r=yield this.loadingController.create({message:"Spremam postavke..."});yield r.present();try{(yield this.userService.updateSettings(this.settingsForm.value).toPromise())&&(this.showToast("Postavke uspje\u0161no spremljene!","success"),this.userService.refreshUserSettings())}catch(c){console.error("Error saving settings:",c),this.showToast("Gre\u0161ka pri spremanju postavki","danger")}finally{yield r.dismiss()}}else this.showToast("Molimo ispunite sva polja","warning")})}showToast(r,c="primary"){return I(this,null,function*(){yield(yield this.toastController.create({message:r,duration:3e3,color:c,position:"top"})).present()})}};a.\u0275fac=function(c){return new(c||a)(h(w),h(re),h(oe),h(ee),h(W))},a.\u0275cmp=y({type:a,selectors:[["app-tab3"]],decls:68,vars:33,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ngSubmit","formGroup"],[4,"ngIf"],["position","stacked"],["formControlName","countryId","placeholder","Odaberite zemlju","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["formControlName","clothingSize","placeholder","Odaberite veli\u010Dinu","interface","popover"],["formControlName","shoeSizeSystem","placeholder","Odaberite sustav","interface","popover",3,"ionChange"],["formControlName","shoeSize","placeholder","Odaberite veli\u010Dinu","interface","popover"],["expand","block","type","submit",1,"save-button",3,"disabled"],["name","save-outline","slot","start"],["name","information-circle-outline","slot","start","color","primary"],[1,"ion-text-wrap"],["name","shield-checkmark-outline","slot","start","color","success"],[3,"value"]],template:function(c,m){c&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),i(3),d(4,"translate"),t()()(),e(5,"ion-content",1)(6,"ion-header",2)(7,"ion-toolbar")(8,"ion-title",3),i(9),d(10,"translate"),t()()(),e(11,"form",4),b("ngSubmit",function(){return m.saveSettings()}),g(12,le,17,2,"ion-card",5),e(13,"ion-card")(14,"ion-card-header")(15,"ion-card-title"),i(16),d(17,"translate"),t(),e(18,"ion-card-subtitle"),i(19,"Prilagodite pretra\u017Eivanje prema va\u0161im potrebama"),t()(),e(20,"ion-card-content")(21,"ion-item")(22,"ion-label",6),i(23),d(24,"translate"),t(),e(25,"ion-select",7),g(26,se,2,2,"ion-select-option",8),t()(),e(27,"ion-item")(28,"ion-label",6),i(29),d(30,"translate"),t(),e(31,"ion-select",9),g(32,me,2,2,"ion-select-option",8),t()(),e(33,"ion-item")(34,"ion-label",6),i(35),d(36,"translate"),t(),e(37,"ion-select",10),b("ionChange",function(){return m.onShoeSizeSystemChange()}),g(38,ce,2,2,"ion-select-option",8),t()(),e(39,"ion-item")(40,"ion-label",6),i(41),d(42,"translate"),t(),e(43,"ion-select",11),g(44,pe,2,2,"ion-select-option",8),t()(),e(45,"ion-button",12),_(46,"ion-icon",13),i(47),d(48,"translate"),t()()(),e(49,"ion-card")(50,"ion-card-header")(51,"ion-card-title"),i(52,"Pomo\u0107"),t()(),e(53,"ion-card-content")(54,"ion-item"),_(55,"ion-icon",14),e(56,"ion-label",15)(57,"h3"),i(58,"Za\u0161to su mi potrebne ove postavke?"),t(),e(59,"p"),i(60,"Va\u0161a zemlja odre\u0111uje koje trgovine \u0107e biti pretra\u017Eene. Veli\u010Dine poma\u017Eu filtrirati rezultate koji su vam dostupni."),t()()(),e(61,"ion-item"),_(62,"ion-icon",16),e(63,"ion-label",15)(64,"h3"),i(65,"Privatnost"),t(),e(66,"p"),i(67,"Va\u0161i podaci se \u010Duvaju lokalno na va\u0161em ure\u0111aju i koriste se samo za pobolj\u0161anje pretra\u017Eivanja."),t()()()()()()()),c&2&&(s("translucent",!0),n(3),S(" ",u(4,17,"TABS.SETTINGS")," "),n(2),s("fullscreen",!0),n(4),p(u(10,19,"TABS.SETTINGS")),n(2),s("formGroup",m.settingsForm),n(),s("ngIf",m.currentUser),n(4),p(u(17,21,"SETTINGS.TITLE")),n(7),p(u(24,23,"SETTINGS.COUNTRY")),n(3),s("ngForOf",m.countries),n(3),p(u(30,25,"SETTINGS.CLOTHING_SIZE")),n(3),s("ngForOf",m.clothingSizes),n(3),p(u(36,27,"SETTINGS.SHOE_SIZE_SYSTEM")),n(3),s("ngForOf",m.shoeSizeSystems),n(3),p(u(42,29,"SETTINGS.SHOE_SIZE")),n(3),s("ngForOf",m.availableShoeSizes),n(),s("disabled",!m.settingsForm.valid),n(2),S(" ",u(48,31,"SETTINGS.SAVE")," "))},dependencies:[te,B,V,D,A,L,H,$,q,X,Z,K,R,Y,J,Q,G,O,x,z,k,N,P,j,U,F,M,ne,ie],styles:[".save-button[_ngcontent-%COMP%]{margin-top:24px}ion-card[_ngcontent-%COMP%]{margin:16px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:4px;font-weight:500}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;color:var(--ion-color-medium);font-size:.9rem}.ion-text-wrap[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:normal!important}@media (max-width: 768px){ion-card[_ngcontent-%COMP%]{margin:8px}}"]});let o=a;return o})();export{Te as Tab3Page};
